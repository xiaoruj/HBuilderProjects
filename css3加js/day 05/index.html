<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Document</title>
		<link rel="stylesheet" href="css/index.css">
	</head>
	<body>
		<!--外部容器-->
		<div id="wrap">
			<!--开机动画-->
			<div id="mask">
				<div class="maskTop"></div>
				<div class="maskBottom"></div>
				<span class="maskLine"></span>
			</div>
			<!--侧边导航-->
			<ul id="menuBar">
				<li class="active"></li>
				<li></li>
				<li></li>
				<li></li>
				<li></li>
			</ul>
			<!--头部区域-->
			<header id="header">
				<div class="headerMain">
					<!--logo-->
					<h1 class="logo">
						<a href="javascript:;">
							<img src="img/logo.png" alt="">
						</a>
					</h1>
					<!--导航-->
					<nav class="nav">
						<ul>
							<li>
								<a href="javascript:;">
									<div class="up"><img src="img/home_gruen.png" alt=""></div>
									<div class="down"><img src="img/home.png" alt=""></div>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<div class="up">课程</div>
									<div class="down">课程</div>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<div class="up">作品</div>
									<div class="down">作品</div>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<div class="up">关于</div>
									<div class="down">关于</div>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<div class="up">讲师团队</div>
									<div class="down">讲师团队</div>
								</a>
							</li>
						</ul>
					</nav>
				</div>
				<div class="arrow"></div>
			</header>
			<!--内容区域-->
			<div class="content" id="content">
				<ul class="list">
					<li>
						<div class="home">
							<ul class="homeList">
								<li class="active">
									<p class="commonTitle">第一屏</p>
								</li>
								<li>
									<p class="commonTitle">第二屏</p>
								</li>
								<li>
									<p class="commonTitle">第三屏</p>
								</li>
								<li>
									<p class="commonTitle">第四屏</p>
								</li>
							</ul>
							<ul class="homeIcon">
								<li class="active"></li>
								<li></li>
								<li></li>
								<li></li>
							</ul>
						</div>
					</li>
					<li>
						<div class="course">
							<div class="course1">
								<h2 class="commonTitle">
									<span>李易峰</span><br>
									<span>我在北京等你</span>
								</h2>
							</div>
							<div class="course2">
								<p class="commonText">
									我在北京等你》是由许肇任、鄢钷、解航、陈宥良执导，李易峰、江疏影、蒋梦婕、胡宇威领衔主演的都市爱情创业剧<br>
									该剧讲述了热血律师徐天、新锐设计师盛夏等海外游子从异乡到故土，一路勇敢追梦、无畏前行的故事
								</p>
							</div>
							<div class="course3">
								<div class="line"></div>
								<div class="line"></div>
								<div class="line"></div>
								<div class="line"></div>
								<div class="line"></div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">李易峰</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">麻雀</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">古剑奇谭</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">青云志</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">动物世界</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">怦然星动</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">心理罪</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">活色生香</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">老炮</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">盗墓笔记</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">栀子花开</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">我在北京等你</div>
									</div>
								</div>
							</div>
							<div class="plane1"></div>
							<div class="plane2"></div>
							<div class="plane3"></div>
						</div>
					</li>
					<li>
						<div class="works">
							<header class="works1">
								<h2 class="commonTitle">
									<span>李易峰</span><br>
									<span>我在北京等你</span>
								</h2>
							</header>
							<div class="works2">
								<div class="item">
									<!--图片-->
									<img src="img/worksimg1.jpg" alt="">
									<!--遮罩-->
									<div class="mask">
										<span>尚硅谷李易峰</span>
										<div class="icon"></div>
									</div>
								</div>
								<div class="item">
									<!--图片-->
									<img src="img/worksimg2.jpg" alt="">
									<!--遮罩-->
									<div class="mask">
										<span>尚硅谷李易峰</span>
										<div class="icon"></div>
									</div>
								</div>
								<div class="item">
									<!--图片-->
									<img src="img/worksimg3.jpg" alt="">
									<!--遮罩-->
									<div class="mask">
										<span>尚硅谷李易峰</span>
										<div class="icon"></div>
									</div>
								</div>
								<div class="item">
									<!--图片-->
									<img src="img/worksimg4.jpg" alt="">
									<!--遮罩-->
									<div class="mask">
										<span>尚硅谷李易峰</span>
										<div class="icon"></div>
									</div>
								</div>
							</div>
							<div class="works3"></div>
							<div class="pencel1"></div>
							<div class="pencel2"></div>
							<div class="pencel3"></div>
						</div>
					</li>
					<li>
						<div class="about">
							<header class="about1">
								<h2 class="commonTitle">
									<span>李易峰</span><br>
									<span>我在北京等你</span>
								</h2>
							</header>
							<div class="about2">
								<p class="commonText">
									《我在北京等你》是由许肇任、鄢钷、解航、陈宥良执导，李易峰、江疏影、蒋梦婕、胡宇威领衔主演的都市爱情创业剧<br>
										该剧讲述了热血律师徐天、新锐设计师盛夏等海外游子从异乡到故土，一路勇敢追梦、无畏前行的故事
								</p>
							</div>
							<div class="about3">
								<div class="item">
									<!--底图-->
									<span></span>
									<!--顶图  通过标签自定义属性  来存储当前顶图的图片路径-->
									<ul data-src="img/about1.jpg"></ul>

								</div>
								<div class="item">
									<!--底图-->
									<span></span>
									<!--顶图  通过标签自定义属性  来存储当前顶图的图片路径-->
									<ul data-src="img/about3.jpg" data-hahaha="haha"></ul>
								</div>
							</div>
						</div>
					</li>
					<li>
						<div class="team">
							<header class="team1">
								<h2 class="commonTitle">
									<span>李易峰</span><br>
									<span>我在北京</span>
								</h2>
							</header>
							<div class="team2">
								<p class="commonText">
									刘诗诗，唐嫣，迪丽热巴，杨幂，四爷，肖战，郭德纲，于谦，李易峰，刘诗诗，唐嫣，迪丽热巴，杨幂，四爷，肖战，郭德纲，于谦，李易峰刘诗诗，唐嫣，迪丽热巴，杨幂，四爷，肖战，郭德纲，于谦，李易峰刘诗诗，唐嫣，迪丽热巴，杨幂，四爷，肖战，郭德纲，于谦，李易峰刘诗诗，唐嫣，迪丽热巴，杨幂，四爷，肖战，郭德纲，于谦，李易峰
								</p>
							</div>
							<ul class="team3">
								<li></li>
								<li></li>
								<li></li>
								<li></li>
							</ul>
						</div>
					</li>
				</ul>
			</div>
		</div>
		<script type="text/javascript">
			window.onload = function() {
				//  获取元素
				var liNodes = document.querySelectorAll('#header .headerMain .nav li');
				var upNodes = document.querySelectorAll('#header .headerMain .nav li .up');
				var arrow = document.querySelector('.arrow');
				var content = document.getElementById('content');
				var contentList = document.querySelector('#content>.list');
				var contentLi = document.querySelectorAll('#content .list>li');
				var header = document.getElementById('header');
				var aboutUl = document.querySelectorAll('.content .list .about .about3>.item>ul');
				var homeListLi = document.querySelectorAll('.content .list .home .homeList>li');
				var homeIconLi = document.querySelectorAll('.content .list .home .homeIcon>li');
				var menuBarLi = document.querySelectorAll('#menuBar li');
				var maskLine = document.querySelector('#mask .maskLine');
				var maskTop = document.querySelector('#mask .maskTop');
				var maskBottom = document.querySelector('#mask .maskBottom');
				var mask = document.getElementById('mask');
				//      用来标记当前页面显示在第几屏
				var now = 0;
				var timer = null;
				var preIndex = 0;
				//        当视口发生改变时从新计算小三角位置和内容区域高度
				window.onresize = function() {
					arrow.style.left = liNodes[now].getBoundingClientRect().left + liNodes[now].offsetWidth / 2 -
						arrow.offsetWidth / 2 + 'px';
					contentBind();
				};
				//        开机动画
				loading();

				function loading() {
					//          统计已加载图片张数
					var imgFlag = 0;
					var imgArr = ['bg1.jpg', 'bg2.jpg', 'bg3.jpg', 'bg4.jpg', 'bg5.jpg', 'about1.jpg', 'about2.jpg', 'about3.jpg',
						'about4.jpg', 'worksimg1.jpg', 'worksimg2.jpg', 'worksimg3.jpg', 'worksimg4.jpg', 'team.png', 'greenLine.png'
					];
					for (var i = 0; i < imgArr.length; i++) {
						var imgNode = new Image();
						imgNode.src = 'img/' + imgArr[i];
						//                当前图片加载完成   执行回调函数
						imgNode.onload = function() {
							imgFlag++;
							//                    显示的加载百分比
							//                    已加载图片张数/图片总数  等于页面加载比例  * 100  转换成百分比
							maskLine.style.width = imgFlag / imgArr.length * 100 + '%';
						}
					}
					maskLine.addEventListener('transitionend', function() {
						maskTop.style.height = '0';
						maskBottom.style.height = '0';
						this.style.display = 'none';
					});
					//           maskBottom或者maskTop  任意一个元素过渡执行完成  说明整个开机动画都执行完了
					maskBottom.addEventListener('transitionend', function() {
						//                第一屏入场动画
						animationArr[0]['inAin']();
						//                第一屏3d轮播执行
						home3D();
						mask.style.display = 'none';
					})
				}



				//        出入场动画  在数组中存储对象  每个对象当中存储一个屏幕的出入场动画
				var animationArr = [{
					//                第一屏
					inAin: function() {
						var homeList = document.querySelector('.content .list .home .homeList');
						var homeIcon = document.querySelector('.content .list .home .homeIcon');
						homeList.style.transform = 'translateY(0)';
						homeIcon.style.transform = 'translate(-50%,0)';
						homeList.style.opacity = '1';
						homeIcon.style.opacity = '1';
					},
					outAin: function() {
						var homeList = document.querySelector('.content .list .home .homeList');
						var homeIcon = document.querySelector('.content .list .home .homeIcon');
						homeList.style.transform = 'translateY(-200px)';
						homeIcon.style.transform = 'translate(-50%,200px)';
						homeList.style.opacity = '0';
						homeIcon.style.opacity = '0';
					}
				}, {
					//                第二屏
					inAin: function() {
						var plane1 = document.querySelector('.content .course .plane1');
						var plane2 = document.querySelector('.content .course .plane2');
						var plane3 = document.querySelector('.content .course .plane3');

						plane1.style.transform = 'translate(0,0)';
						plane2.style.transform = 'translate(0,0)';
						plane3.style.transform = 'translate(0,0)';
					},
					outAin: function() {
						var plane1 = document.querySelector('.content .course .plane1');
						var plane2 = document.querySelector('.content .course .plane2');
						var plane3 = document.querySelector('.content .course .plane3');

						plane1.style.transform = 'translate(-200px,-200px)';
						plane2.style.transform = 'translate(-200px,200px)';
						plane3.style.transform = 'translate(200px,-200px)';
					}
				}, {
					//            第三屏
					inAin: function() {
						var pencel1 = document.querySelector('.content .works .pencel1');
						var pencel2 = document.querySelector('.content .works .pencel2');
						var pencel3 = document.querySelector('.content .works .pencel3');
						pencel1.style.transform = 'translateY(0)';
						pencel2.style.transform = 'translateY(0)';
						pencel3.style.transform = 'translateY(0)';
					},
					outAin: function() {
						var pencel1 = document.querySelector('.content .works .pencel1');
						var pencel2 = document.querySelector('.content .works .pencel2');
						var pencel3 = document.querySelector('.content .works .pencel3');
						pencel1.style.transform = 'translateY(-200px)';
						pencel2.style.transform = 'translateY(200px)';
						pencel3.style.transform = 'translateY(200px)';

					}
				}, {
					//            第四屏
					inAin: function() {
						var item1 = document.querySelectorAll('.content .list .about .about3>.item')[0];
						var item2 = document.querySelectorAll('.content .list .about .about3>.item')[1];
						item1.style.transform = 'rotate(0)';
						item2.style.transform = 'rotate(0)';
					},
					outAin: function() {
						var item1 = document.querySelectorAll('.content .list .about .about3>.item')[0];
						var item2 = document.querySelectorAll('.content .list .about .about3>.item')[1];
						item1.style.transform = 'rotate(45deg)';
						item2.style.transform = 'rotate(-45deg)';
					}
				}, {
					//              第五屏
					inAin: function() {
						var team1 = document.querySelector('.content .list .team .team1');
						var team2 = document.querySelector('.content .list .team .team2');
						team1.style.transform = 'translateX(0)';
						team2.style.transform = 'translateX(0)';
					},
					outAin: function() {
						var team1 = document.querySelector('.content .list .team .team1');
						var team2 = document.querySelector('.content .list .team .team2');
						team1.style.transform = 'translateX(-200px)';
						team2.style.transform = 'translateX(200px)';
					}
				}];
				//  设置所有屏幕都处于出场状态
				for (var i = 0; i < animationArr.length; i++) {
					animationArr[i]['outAin']();
				}
				//        第一屏  3d轮播

				function home3D() {
					var oldIndex = 0;
					var autoIndex = 0;
					var autoTimer = null;
					for (var i = 0; i < homeIconLi.length; i++) {
						homeIconLi[i].index = i;
						homeIconLi[i].onclick = function() {
							//                    清除定时器
							clearInterval(autoTimer);
							//                  小圆点高亮切换
							for (var j = 0; j < homeIconLi.length; j++) {
								homeIconLi[j].className = '';
							}
							homeIconLi[this.index].className = 'active';
							//                   翻页   oldIndex一定对应隐藏的class   this.index一定对应显示的class
							if (oldIndex < this.index) {
								//                      点击右侧： 左边隐藏leftHide  右边显示rightShow
								homeListLi[oldIndex].className = 'leftHide';
								homeListLi[this.index].className = 'rightShow'
							} else if (oldIndex > this.index) {
								//                      点击左侧：左边显示leftShow  右边隐藏rightHide
								homeListLi[oldIndex].className = 'rightHide';
								homeListLi[this.index].className = 'leftShow';
							}
							//                   更新索引
							oldIndex = this.index;
							autoIndex = this.index;
							auto();
						}
					}
					auto();

					function auto() {
						autoTimer = setInterval(function() {
							autoIndex++;
							//                    边界判断
							if (autoIndex === homeListLi.length) {
								autoIndex = 0;
							}
							//              自动轮播就是一直点击右侧     点击右侧： 左边隐藏leftHide  右边显示rightShow
							homeListLi[oldIndex].className = 'leftHide';
							homeListLi[autoIndex].className = 'rightShow';
							//                    小圆点更新
							for (var i = 0; i < homeIconLi.length; i++) {
								homeIconLi[i].className = '';
							}
							homeIconLi[autoIndex].className = 'active';
							//                更新索引
							oldIndex = autoIndex;
						}, 3000);
					}
				}

				//        图片炸裂
				picBoom();

				function picBoom() {
					for (var i = 0; i < aboutUl.length; i++) {
						changeImg(aboutUl[i])
					}

					function changeImg(ul) {
						//                先获取li的宽度与高度
						var w = ul.offsetWidth / 2;
						var h = ul.offsetHeight / 2;
						//                获取图片路径  dataset   用于获取自定义属性   data-开头
						var imgSrc = ul.dataset.src;

						for (var i = 0; i < 4; i++) {
							//                    创建li
							var liNode = document.createElement('li');
							//                    创建图片
							var imgNode = new Image();
							//                    设置路径
							imgNode.src = imgSrc;
							//                    给li设置宽度与高度
							liNode.style.width = w + 'px';
							liNode.style.height = h + 'px';
							//                    设置图片位置
							//                  i=0     l=    0     t=  0
							//                  i=1     l=   -w     t=  0
							//                  i=2     l=    0     t=  -h
							//                  i=3     l=   -w     t=  -h
							imgNode.style.left = -(i % 2) * w + 'px';
							imgNode.style.top = -Math.floor(i / 2) * h + 'px';
							//                    把img放到li里边
							liNode.appendChild(imgNode);
							//                    把li放到ul里边
							ul.appendChild(liNode);
						}
						var imgNodes = ul.querySelectorAll('img');
						ul.onmouseenter = function() {
							imgNodes[0].style.top = h + 'px';
							imgNodes[1].style.left = -2 * w + 'px';
							imgNodes[2].style.left = w + 'px';
							imgNodes[3].style.top = -2 * h + 'px';
						};
						ul.onmouseleave = function() {
							imgNodes[0].style.top = 0;
							imgNodes[1].style.left = -w + 'px';
							imgNodes[2].style.left = 0;
							imgNodes[3].style.top = -h + 'px';
						};

					}
				}







				document.onmousewheel = function(event) {
					clearTimeout(timer);
					timer = setTimeout(function() {
						fun(event);
					}, 200);
				};
				if (document.addEventListener) {
					document.addEventListener('DOMMouseScroll', function(event) {
						clearTimeout(timer);
						timer = setTimeout(function() {
							fun(event);
						}, 200)
					})
				}
				//        滚轮
				//        document.onmousewheel = fun;
				//        if(document.addEventListener){
				//            document.addEventListener('DOMMouseScroll',fun)
				//        }
				function fun(event) {
					event = event || window.event;
					var flag = '';
					//          判断浏览器
					if (event.wheelDelta) {
						//              ie/chrome
						if (event.wheelDelta > 0) {
							//                  上
							flag = 'up';
						} else {
							//                    下
							flag = 'down';
						}
					} else if (event.detail) {
						//              firefox
						if (event.detail < 0) {
							//                  上
							flag = 'up';
						} else {
							//                    下
							flag = 'down';
						}
					}
					preIndex = now;
					if ((preIndex === 0 && flag === 'up') || (preIndex === liNodes.length - 1 && flag === 'down')) {
						return
					}
					switch (flag) {
						case 'up':
							now--;
							move(now);
							break;
						case 'down':
							now++;
							move(now);
							break;
					}





					//        取消默认行为
					event.preventDefault && event.preventDefault();
					return false;

				}



				//    内容区域逻辑
				contentBind();

				function contentBind() {
					//        视口高度- 头部高度 = 内容区域高度
					content.style.height = document.documentElement.clientHeight - header.offsetHeight + 'px';
					for (var i = 0; i < contentLi.length; i++) {
						contentLi[i].style.height = document.documentElement.clientHeight -
							header.offsetHeight + 'px';
					}
				}

				headerBind();

				function headerBind() {
					//    页面初始化
					//     第一个up的宽度100%   小三角要显示在第一个li的下边
					upNodes[0].style.width = '100%';
					//    当前li相对于屏幕左侧的距离+ li宽度的一半 - 小三角自身宽度的一半
					arrow.style.left = liNodes[0].getBoundingClientRect().left + liNodes[0].offsetWidth / 2 -
						arrow.offsetWidth / 2 + 'px';
					//  给li绑定单击事件   处理整个导航的高亮切换
					for (var i = 0; i < liNodes.length; i++) {
						//        给每一个li添加索引
						liNodes[i].index = i;
						liNodes[i].onclick = function() {
							preIndex = now;
							now = this.index;
							if (preIndex === now) {
								return
							}
							move(now);
						}
					}
					//          给侧边导航绑定单击事件
					for (var i = 0; i < menuBarLi.length; i++) {
						menuBarLi[i].index = i;
						menuBarLi[i].onclick = function() {
							preIndex = now;
							now = this.index;
							if (preIndex === now) {
								return
							}
							move(now)
						}
					}
				}
				//  屏幕切换逻辑   所有翻页相关的操作 都放在这个函数里边
				function move(now) {
					//          up宽度切换
					for (var j = 0; j < upNodes.length; j++) {
						upNodes[j].style.width = ''
					}
					upNodes[now].style.width = '100%';
					//          小三角位置切换
					arrow.style.left = liNodes[now].getBoundingClientRect().left +
						liNodes[now].offsetWidth / 2 - arrow.offsetWidth / 2 + 'px';
					//            屏幕切换
					//            -当前屏幕索引值 * （视口的高度- 头部的高度（80））
					contentList.style.top = -now * (document.documentElement.clientHeight -
						header.offsetHeight) + 'px';
					//            侧边导航高亮状态切换
					for (var i = 0; i < menuBarLi.length; i++) {
						menuBarLi[i].className = '';
					}
					menuBarLi[now].className = 'active';
					//            入场动画
					animationArr[now]['inAin']();
					//            出场动画
					animationArr[preIndex]['outAin']();
				}
			}
		</script>
	</body>
</html>
