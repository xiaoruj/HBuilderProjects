<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<title>Document</title>
		<link rel="stylesheet" href="css/index.css">
	</head>
	<body>
		<!--外部容器-->
		<div id="wrap">
			<!--头部区域-->
			<div id="header">
				<div class="headerMain">
					<!--logo-->
					<h1 class="logo">
						<a href="javascript:;">
							<img src="img/logo.png" alt="">
						</a>
					</h1>
					<!--导航-->
					<nav class="nav">
						<ul>
							<li>
								<a href="javascript:;">
									<div class="up"><img src="img/home_gruen.png" alt=""></div>
									<div class="down"><img src="img/home.png" alt=""></div>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<div class="up">课程</div>
									<div class="down">课程</div>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<div class="up">作品</div>
									<div class="down">作品</div>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<div class="up">关于</div>
									<div class="down">关于</div>
								</a>
							</li>
							<li>
								<a href="javascript:;">
									<div class="up">讲师团队</div>
									<div class="down">讲师团队</div>
								</a>
							</li>
						</ul>
					</nav>
				</div>
				<!--小三角-->
				<div class="arrow"></div>
			</div>

			<!--内容区域-->
			<div class="content">
				<ul class="list">
					<li>
						<div>第一屏</div>
					</li>
					<li>
						<div class="course">
							<header class="course1">
								<h2 class="commonTitle">
									<span>李易峰</span><br>
									<span>我在北京等你</span>
								</h2>
							</header>
							<div class="course2">
								<p class="commonText">
									《我在北京等你》是由许肇任、鄢钷、解航、陈宥良执导，李易峰、江疏影、蒋梦婕、胡宇威领衔主演的都市爱情创业剧<br>
									该剧讲述了热血律师徐天、新锐设计师盛夏等海外游子从异乡到故土，一路勇敢追梦、无畏前行的故事
								</p>
							</div>
							<div class="course3">
								<div class="line"></div>
								<div class="line"></div>
								<div class="line"></div>
								<div class="line"></div>
								<div class="line"></div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">李易峰</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">古剑奇谭</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">麻雀</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">青云志</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">动物世界</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">心理罪</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">怦然星动</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">活色生香</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">盗墓笔记</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">老炮</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">栀子花开</div>
									</div>
								</div>
								<div class="item">
									<div class="itemInner">
										<div class="front"></div>
										<div class="back">我在北京等你</div>
									</div>
								</div>
							</div>

						</div>
					</li>
					<li>
						<div class="works">
							<header class="works1">
								<h2 class="commonTitle">
									<span>李易峰</span><br>
									<span>我在北京等你</span>
								</h2>
							</header>
							<div class="works2">
								<div class="item">
									<img src="img/worksimg1.jpg" alt="">
									<!--遮罩-->
									<div class="mask">
										<span>尚硅谷李易峰</span>
										<div class="icon"></div>
									</div>
								</div>
								<div class="item">
									<img src="img/worksimg2.jpg" alt="">
									<!--遮罩-->
									<div class="mask">
										<span>尚硅谷李易峰</span>
										<div class="icon"></div>
									</div>
								</div>
								<div class="item">
									<img src="img/worksimg3.jpg" alt="">
									<!--遮罩-->
									<div class="mask">
										<span>尚硅谷李易峰</span>
										<div class="icon"></div>
									</div>
								</div>
								<div class="item">
									<img src="img/worksimg4.jpg" alt="">
									<!--遮罩-->
									<div class="mask">
										<span>尚硅谷李易峰</span>
										<div class="icon"></div>
									</div>
								</div>
							</div>
							<div class="works3"></div>
						</div>
					</li>
					<li>
						<div class="about">
							<header class="about1">
								<h2 class="commonTitle">
									<span>李易峰</span><br>
									<span>我在北京等你</span>
								</h2>
							</header>
							<div class="about2">
								<p class="commonText">《我在北京等你》是由许肇任、鄢钷、解航、陈宥良执导，李易峰、江疏影、蒋梦婕、胡宇威领衔主演的都市爱情创业剧<br>
									该剧讲述了热血律师徐天、新锐设计师盛夏等海外游子从异乡到故土，一路勇敢追梦、无畏前行的故事
								</p>
							</div>
							<div class="about3">
								<div class="item">
									<!--底图-->
									<span></span>
									<!--小图-->
									<ul data-src="img/about1.jpg"></ul>
								</div>
								<div class="item">
									<!--底图-->
									<span></span>
									<!--小图-->
									<ul data-src="img/about3.jpg"></ul>
								</div>
							</div>
						</div>
					</li>
					<li>
						<div>第五屏</div>
					</li>
				</ul>
			</div>
		</div>


		<script type="text/javascript">
			window.onload = function() {
				//      获取元素
				var arrow = document.querySelector('.arrow');
				var liNodes = document.querySelectorAll('#header .headerMain .nav li');
				var upNodes = document.querySelectorAll('#header .headerMain .nav li .up');
				var content = document.querySelector('.content');
				var contentLi = document.querySelectorAll('.content .list>li');
				var contentList = document.querySelector('.content .list');
				var header = document.getElementById('header');
				var aboutUl = document.querySelectorAll('.content .list .about .about3>.item ul');
				var now = 0;
				var timer = null;

				//        图片炸裂
				picBoom();

				function picBoom() {
					for (var i = 0; i < aboutUl.length; i++) {
						changeImg(aboutUl[i]);
					}

					function changeImg(ul) {
						var w = ul.offsetWidth / 2;
						var h = ul.offsetHeight / 2;
						//                保存图片路径
						var imgSrc = ul.dataset.src;
						for (var i = 0; i < 4; i++) {
							//                    创建li
							var liNode = document.createElement('li');
							//                    创建img
							var imgNode = new Image();
							imgNode.src = imgSrc;
							//                  设置li的宽度与高度
							liNode.style.width = w + 'px';
							liNode.style.height = h + 'px';
							//                  图片的位置
							//                    i=0      l=0     t=0
							//                    i=1      l=-w    t=0
							//                    i=2      l=0     t=-h
							//                    i=3      l=-w    t=-h
							imgNode.style.left = -(i % 2) * w + 'px';
							imgNode.style.top = -Math.floor(i / 2) * h + 'px';

							liNode.appendChild(imgNode);
							ul.appendChild(liNode);
						}
						//                当前这个ul下的四张图片
						var imgNodes = ul.querySelectorAll('img');
						ul.onmouseenter = function() {
							imgNodes[0].style.top = h + 'px';
							imgNodes[1].style.left = -2 * w + 'px';
							imgNodes[2].style.left = w + 'px';
							imgNodes[3].style.top = -2 * h + 'px';
						};
						ul.onmouseleave = function() {
							imgNodes[0].style.top = 0;
							imgNodes[1].style.left = -w + 'px';
							imgNodes[2].style.left = 0;
							imgNodes[3].style.top = -h + 'px';
						}
					}

				}


				//        滚轮事件
				//        事件执行的之后  比如说执行了10次   前9次不要  只要最后一次
				document.onmousewheel = function(event) {
					clearTimeout(timer);
					timer = setTimeout(function() {
						fun(event);
					}, 200);

				};
				if (document.addEventListener) {
					document.addEventListener('DOMMouseScroll', function(event) {
						clearTimeout(timer);
						timer = setTimeout(function() {
							fun(event)
						}, 200);
					});
				}

				function fun(event) {
					event = event || window.event;
					//            判断浏览器
					var flag = '';
					if (event.wheelDelta) {
						//              ie/chrome
						if (event.wheelDelta > 0) {
							//                  上
							flag = 'up';
						} else {
							//                    下
							flag = 'down';
						}
					} else if (event.detail) {
						//              firefox
						if (event.detail < 0) {
							//                  上
							flag = 'up';
						} else {
							//                    下
							flag = 'down'
						}
					}
					//            根据已经判断的方向  来执行后续的逻辑
					switch (flag) {
						case 'up':
							if (now > 0) {
								now--;
							}
							move(now);
							break;
						case 'down':
							if (now < liNodes.length - 1) {
								now++;
							}
							move(now);
							break;
					}
					//            取消默认行为
					event.preventDefault && event.preventDefault();
					return false;

				}

				//        内容区域高度计算
				contentBind();

				function contentBind() {
					content.style.height = document.documentElement.clientHeight - header.offsetHeight + 'px';
					for (var i = 0; i < contentLi.length; i++) {
						contentLi[i].style.height = document.documentElement.clientHeight -
							header.offsetHeight + 'px';
					}
				}


				//        页面初始化  第一个up的宽度为100%
				upNodes[0].style.width = '100%';
				//      小三角的位置到第一个li下边  实际要做的就是修改小三角的left值
				//       当前li相对于屏幕左侧的距离 + li宽度的一半 - 小三角宽度的一半
				arrow.style.left = liNodes[0].getBoundingClientRect().left +
					liNodes[0].offsetWidth / 2 - arrow.offsetWidth / 2 + 'px';

				//        给li绑定单击事件
				//        给当前点击的li内部的up宽度变成100%  其余的up变成0
				//       修改小三角的位置到当前点击的这个li的下边
				for (var i = 0; i < liNodes.length; i++) {
					//            给每一个li添加索引
					liNodes[i].index = i;
					liNodes[i].onclick = function() {
						now = this.index;
						move(now);
					}
				}
				move(3);
				//      屏幕切换逻辑
				function move(now) {
					//                up宽度切换
					for (var j = 0; j < upNodes.length; j++) {
						//                    不要写0   不然hover设置的划过样式会失效
						upNodes[j].style.width = '';
					}
					//                给当前点击的li对应的up设置为百分百
					upNodes[now].style.width = '100%';
					//                小三角切换
					arrow.style.left = liNodes[now].getBoundingClientRect().left +
						liNodes[now].offsetWidth / 2 - arrow.offsetWidth / 2 + 'px';
					//            listtop值设置
					contentList.style.top = -now * (document.documentElement.clientHeight -
						header.offsetHeight) + 'px';
				}
			}
		</script>
	</body>
</html>
