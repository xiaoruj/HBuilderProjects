<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>城市三级联动</title>
    <link href="https://cdn.bootcss.com/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
</head>
<body>
<div class="container">
    <div class="col-xs-6 col-xs-offset-3">
        <h2 class="page-header">城市三级联动</h2>
        <div class="row">
            <div class="col-xs-4 item">
                <select class="form-control" id="province">
                    <option>请选择</option>
                </select>
            </div>
            <div class="col-xs-4 item">
                <select class="form-control" id="city">
                    <option>请选择</option>
                </select>
            </div>
            <div class="col-xs-4 item">
                <select class="form-control" id="xian">
                    <option>请选择</option>

                </select>
            </div>
        </div>
    </div>
</div>

<script>
    let province = document.getElementById('province');
    let city = document.getElementById('city');
    let xian = document.getElementById('xian');
    function getProvinces(){
        $.get('/get-province', function(data){
            for(let i=0;i<data.length;i++){
                let item = document.createElement('option');
                item.innerHTML = data[i];
                province.appendChild(item);
            }
        });
    }
    getProvinces();
    province.addEventListener('change', function(){
        $('#city').html('<option>请选择</option>');
        $('#xian').html('<option>请选择</option>')
        let sheng = province.value;
        $.get('/get-city', {sheng:sheng}, function(data){
            for(let i=0;i<data.length;i++){
                $(`<option>${data[i]}</option>`).appendTo('#city');
            }
        });
    });
    city.addEventListener('change', function(){
        $('#xian').html('<option>请选择</option>')
        let sheng = province.value;
        let cityName = city.value;
        $.get('/get-xian', {sheng:sheng, city:cityName}, function(data){
            for(let i=0;i<data.length;i++){
                $('#xian').append('<option>'+data[i]+'</option>');
            }
        });
    });
</script>
</body>
</html>