<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="https://cdn.bootcss.com/twitter-bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<button id="btn" class="btn btn-primary">发送GET请求</button>
<button id="btn2" class="btn btn-primary">发送POST请求</button>
<button id="btn3" class="btn btn-primary">发送超时请求</button>
<button id="quxiao" class="btn btn-danger">取消</button>
<script>
    var btn = document.getElementById('btn');
    var btn2 = document.getElementById('btn2');
    var btn3 = document.getElementById('btn3');
    var quxiao = document.getElementById('quxiao');
    var x = null;
    btn.onclick = function(){
        let x = new XMLHttpRequest();
        x.onreadystatechange = function(){
            if(x.readyState === 4){
                if(x.status >= 200 && x.status < 300){
                    console.log(x.status);
                    console.log(x.statusText);
                    console.log(x.getAllResponseHeaders());
                    console.log(x.responseText);
                }
            }
        };
        x.open('GET','/server');
        x.send();
    };
    btn2.onclick = function(){
        let x = new XMLHttpRequest();
        x.onreadystatechange = function(){
            if(x.readyState === 4){
                if(x.status >= 200 && x.status < 300){
                    console.log(x.status);
                    console.log(x.statusText);
                    console.log(x.getAllResponseHeaders());
                    console.log(x.responseText);
                }
            }
        };
        x.open('POST','/server?a=1');
        x.setRequestHeader('a',1);
        x.setRequestHeader('content-type','application/x-www-form-urlencoded');
        x.send('a=1&b=2');
    };
    btn3.onclick = function(){
        x = new XMLHttpRequest();
        x.ontimeout = function(){
            console.log('服务器超时啦!')
        };
        x.onerror = function(){
            console.log('网络出错');
        };
        x.onreadystatechange = function(){
            if(x.readyState === 4){
                if(x.status >= 200 && x.status < 300){
                    console.log(x.status);
                    console.log(x.statusText);
                    console.log(x.getAllResponseHeaders());
                    console.log(x.responseText);
                }
            }
        };
        x.open('GET','/delay-server');
        x.send();
    };

    quxiao.addEventListener('click', ()=>{
        x.abort();
    });
</script>


</body>
</html>